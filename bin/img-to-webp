#!/bin/bash

# Function to show usage
usage() {
    echo "Usage: $0 input_image [output_image]"
    echo "If output_image is not specified, it will use the input_image name with .webp extension"
    exit 1
}

# Check if cwebp is installed
if ! command -v cwebp &> /dev/null; then
    echo "cwebp could not be found, please install it using 'brew install webp'"
    exit 1
fi

# Check if at least one argument is provided
if [ "$#" -lt 1 ]; then
    usage
fi

# Input image
input_image="$1"

# Output image
if [ "$#" -eq 2 ]; then
    output_image="$2"
else
    output_image="${input_image%.*}.webp"
fi

# Convert image to WebP
cwebp -q 80 "$input_image" -o "$output_image"

echo "Conversion complete: $output_image"
